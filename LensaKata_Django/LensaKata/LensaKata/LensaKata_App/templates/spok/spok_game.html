{% load static %}
{% load bootstrap5 %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPOK Game</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/spok_game.css' %}">
</head>
<body>
    <!-- Sidebar -->
    <nav class="sidebar">
        <a href="{% url 'dashboard' %}" class="active">
            <i class="fas fa-home"></i>
        </a>
        <a href="{% url 'langganan' %}" id="langganan-btn">
            <i class="fa-solid fa-credit-card"></i>
        </a>
        <a href="{% url 'account_logout' %}" id="logout-btn">
            <i class="fas fa-sign-out-alt"></i>
        </a>
    </nav>  
    <main class="content">
        <div class="title">SPOK</div>
        <div class="subtitle">Rangkai kalimat seperti ini!</div>
        <div class="sentence-box">{{ challenge.sentence }}</div>
        <form method="POST" class="mb-4">
            {% csrf_token %}
            <div class="d-flex justify-content-center flex-wrap">
                <div class="category-box">
                    S - Subjek
                    {{ form.subject }}
                </div>
                <div class="category-box">
                    P - Predikat
                    {{ form.predicate }}
                </div>
                <div class="category-box">
                    O - Objek
                    {{ form.object }}
                </div>
                <div class="category-box">
                    K - Keterangan
                    {{ form.description }}
                </div>
            </div>
            <div class="d-flex justify-content-center flex-wrap word-box" id="word-box">
                <span class="draggable-word" onclick="insertTag('{{ challenge.subject }}')">{{ challenge.subject }}</span>
                <span class="draggable-word" onclick="insertTag('{{ challenge.predicate }}')">{{ challenge.predicate }}</span>
                <span class="draggable-word" onclick="insertTag('{{ challenge.object }}')">{{ challenge.object }}</span>
                <span class="draggable-word" onclick="insertTag('{{ challenge.description }}')">{{ challenge.description }}</span>
            </div> 
            <button type="submit" class="btn btn-finish">Selesai</button>
        </form>
    </main>
    <script>
        function insertTag(tag) {
            let activeInput = document.activeElement;
            if (activeInput && activeInput.tagName === 'INPUT') {
                activeInput.value += tag + ' ';
            }
        }

        function shuffleWords() {
            const wordBox = document.getElementById('word-box');
            const words = Array.from(wordBox.children);
            for (let i = words.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [words[i], words[j]] = [words[j], words[i]];
            }
            wordBox.innerHTML = '';
            words.forEach(word => wordBox.appendChild(word));
        }

        // Shuffle words on page load
        window.onload = shuffleWords;
    </script>
</body>
</html>